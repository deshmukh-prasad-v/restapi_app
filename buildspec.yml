version: 0.2
phases:
  install:
    runtime-versions:
      # Ensure you specify the correct Java version your application uses
      java: corretto17
  build:
    commands:
      # Use the clean package goal to run the entire build lifecycle 
      # and produce the final JAR file in the target/ directory
      - mvn clean install
  post_build:
    commands:
      # Use find to locate the exact name of the final JAR file generated by the plugin
      - find src/target/ -name "restapi_app-0.0.1-SNAPSHOT.jar"
      - echo "Build process finished. Artifact ready for collection."

artifacts:
  files:
    # Specify the name of the final, executable JAR produced by your build
    - src/target/restapi_app-0.0.1-SNAPSHOT.jar
  # discard-paths: yes puts the JAR directly in the root of your S3 artifact bucket
  discard-paths: yes
